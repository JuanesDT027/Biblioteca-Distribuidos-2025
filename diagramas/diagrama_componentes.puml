@startuml
title III-B3. Diagrama de Componentes - Sistema de Biblioteca Distribuido
skinparam backgroundColor white

skinparam component {
  BackgroundColor #009ee8
  BorderColor #006b9f
  FontColor black
  RoundCorner 10
}
skinparam interface {
  BackgroundColor white
  BorderColor #006b9f
  FontColor black
}
skinparam ArrowColor #006b9f

left to right direction

' ==== Interfaces (declaradas primero) ====
interface "I_Solicitud" as ISolicitud
interface "I_Operacion" as IOperacion
interface "I_Publicacion" as IPublicacion
interface "I_Persistencia" as IPersistencia

' ==== Componentes principales ====
component "Proceso Solicitante\n(ps_solicitantes.py)" as PS
component "Gestor de Carga\n(gestor_carga.py)" as GC
component "Gestor de Almacenamiento\n(gestor_almacenamiento.py)" as GA
database "Archivo libros.txt\n(data/libros.txt)" as BD

' ==== Actores agrupados ====
package "Actores Distribuidos" {
  component "Actor de Préstamo\n(actor_prestamo.py)" as AP
  component "Actor de Renovación\n(actor_renovacion.py)" as AR
  component "Actor de Devolución\n(actor_devolucion.py)" as AD
}

' ==== Relaciones (sintaxis compatible y estable) ====
' Cliente -> interfaz de solicitud -> Gestor (GC provee I_Solicitud)
PS --> ISolicitud
GC ..|> ISolicitud

' Gestor -> I_Operacion -> Actor de Préstamo
GC ..|> IOperacion
AP --> IOperacion

' Gestor -> I_Publicacion -> Actores de Renovación y Devolución
GC ..|> IPublicacion
AR --> IPublicacion
AD --> IPublicacion

' Gestor de Almacenamiento -> I_Persistencia -> consumido por GC y Actores
GA ..|> IPersistencia
GC --> IPersistencia
AP --> IPersistencia
AR --> IPersistencia
AD --> IPersistencia

' Persistencia física
GA --> BD : lectura / escritura

' ==== Notas explicativas ====
note top of GC
Gestor de Carga: valida, orquesta y publica eventos\n(REQ/REP para préstamos, PUB/SUB para eventos).
end note

note left of PS
Proceso Solicitante: cliente que envía solicitudes\nvia REQ/REP a GC.
end note

note right of GA
Gestor de Almacenamiento: abstracción del acceso\na data/libros.txt.
end note

@enduml
